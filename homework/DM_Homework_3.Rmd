---
title: "Homework 3"
author: "Christina Ridlen"
date: "`r Sys.Date()`"
output: md_document
---

# What causes what?

```{r libraries, include = FALSE}
library(tidymodels)
library(tidyverse)
```

# Tree modeling: dengue cases

```{r dengue_data, include = FALSE}
# Load data
dengue <- read_csv("../data/dengue.csv")
```

```{r CART, include = FALSE}

# Create regression tree
model_spec <- decision_tree() %>%
  set_mode("regression") %>%
  set_engine("rpart")

# Plot response variable
ggplot(dengue, aes(x = total_cases)) +
  geom_histogram()

ggplot(dengue, aes(x = log(total_cases))) +
  geom_histogram()

dengue <- dengue %>%
  mutate(log_cases = log(total_cases))
# Train-test split
dengue_split <- initial_split(dengue, prop = 0.8, strata = log_cases)
dengue_train <- training(dengue_split)
dengue_test <- testing(dengue_split)

# Fit to the training data
glimpse(dengue)

model_fit <- model_spec %>%
  fit(formula = log_cases ~ city + season + specific_humidity + tdtr_k + precipitation_amt, data = dengue_train)

model_fit

# Cross Validation

# In-sample performance

# Out-of-sample performance
```

I log-transformed the response variable `total_cases` because it was heavily right skewed. Log-transforming the variable made the distribution a little more bell-shaped.
